import{j as e}from"./ui-4JzjGctU.js";import{A as k}from"./AdminSubnav-DjjmxDuT.js";import{y as S,u as N,C as b,a as C,b as P,z as F,d as D,H as j,f as h,S as f,A as T,D as _,E as R,F as v,G as o,K as g,M as G,N as I,O as U,n as E,Q as M,U as V}from"./index-D6Zlv4TB.js";import{A as B}from"./AdminRoleTester-CQstVZBx.js";import{r}from"./vendor-D63tyEUO.js";import"./supabase-DmvLFwnu.js";import"./test-tube-DyC9_ZKE.js";const H=()=>{const{profile:s,updateProfile:a}=S(),{toast:t}=N(),[i,c]=r.useState(!0),[x,u]=r.useState(!0),[m,l]=r.useState(!0);r.useEffect(()=>{s&&(c(s.enable_fasting_slideshow??!0),u(s.enable_walking_slideshow??!0),l(s.enable_ceramic_animations??!0))},[s]);const d=async(n,y)=>{try{const p={[n]:y};await a(p),t({title:"Animation Settings Updated",description:"Your animation preferences have been saved."})}catch(p){console.error("Error updating animation settings:",p),t({title:"Error",description:"Failed to update animation settings. Please try again.",variant:"destructive"})}};return e.jsxs(b,{className:"bg-ceramic-plate border-ceramic-rim",children:[e.jsx(C,{children:e.jsxs(P,{className:"flex items-center gap-2 text-warm-text",children:[e.jsx(F,{className:"w-5 h-5"}),"Animation Controls"]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{className:"w-4 h-4 text-primary"}),e.jsx(h,{htmlFor:"fasting-slideshow",className:"text-warm-text",children:"Fasting Motivator Slideshow"})]}),e.jsx(f,{id:"fasting-slideshow",checked:i,onCheckedChange:n=>{c(n),d("enable_fasting_slideshow",n)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{className:"w-4 h-4 text-primary"}),e.jsx(h,{htmlFor:"walking-slideshow",className:"text-warm-text",children:"Walking Motivator Slideshow"})]}),e.jsx(f,{id:"walking-slideshow",checked:x,onCheckedChange:n=>{u(n),d("enable_walking_slideshow",n)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"w-4 h-4 text-primary"}),e.jsx(h,{htmlFor:"ceramic-animations",className:"text-warm-text",children:"Hourly Ceramic Timer Animations"})]}),e.jsx(f,{id:"ceramic-animations",checked:m,onCheckedChange:n=>{l(n),d("enable_ceramic_animations",n)}})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Control visual animations and effects throughout the app. Disabling animations can improve performance on slower devices."})]})]})},L=()=>{const{isAdmin:s,access_level:a,hasPremiumFeatures:t,testRole:i,isTestingMode:c}=_();if(!s)return null;const x=[{name:"Food Tracking Navigation",component:"Navigation.tsx",status:"implemented",description:"Food nav button locked for free users with role testing support"},{name:"Voice Input Button",component:"PremiumGatedVoiceButton.tsx",status:"implemented",description:"Voice transcription locked for free users"},{name:"Image Upload",component:"PremiumGatedImageUpload.tsx",status:"implemented",description:"Image upload and AI analysis locked for free users"},{name:"Deficit Analysis",component:"PremiumGatedDeficitAnalysis.tsx",status:"implemented",description:"AI-powered deficit analysis locked for free users"},{name:"Calories In Display",component:"PremiumGatedCaloriesIn.tsx",status:"implemented",description:"Food calorie tracking display locked for free users"},{name:"Deficit Display",component:"PremiumGatedDeficitDisplay.tsx",status:"implemented",description:"Small deficit display locked for free users"},{name:"Large Deficit Display",component:"PremiumGatedDeficitDisplayLarge.tsx",status:"implemented",description:"Large deficit card locked for free users"},{name:"Goal Metrics",component:"PremiumGatedGoalMetrics.tsx",status:"implemented",description:"Goal tracking metrics locked for free users"}],m=c?{level:i||"unknown",hasAccess:i==="admin"||i==="paid_user",display:i==="admin"?"Admin (Testing)":i==="paid_user"?"Premium User (Testing)":"Free User (Testing)"}:{level:a,hasAccess:t,display:a==="admin"?"Admin":t?"Premium User":"Free User"};return e.jsx(b,{className:"p-6 bg-card border-border",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Premium Access Audit Report"})]}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current View:"}),e.jsx(v,{variant:m.hasAccess?"default":"secondary",children:m.display})]}),c&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Role testing active - seeing perspective of ",i]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Premium-Gated Features"}),e.jsx("div",{className:"space-y-2",children:x.map((l,d)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:l.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:l.description})]}),e.jsx(v,{variant:"outline",className:"text-xs",children:l.status})]},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recent Fixes"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(o,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Admin dashboard access preserved during role testing"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(o,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Food navigation button properly locked for free users"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(o,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Role testing persistence with localStorage"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(o,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{children:"Consistent premium gating logic across components"})]})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Testing Instructions"}),e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1 space-y-1",children:[e.jsx("p",{children:"• Use Role Testing above to switch between user perspectives"}),e.jsx("p",{children:"• Free User: Should see locked food nav, premium gates, upgrade prompts"}),e.jsx("p",{children:"• Premium User: Should see unlocked features, no upgrade prompts"}),e.jsx("p",{children:"• Admin: Full access + admin dashboard always visible"})]})]})]})})},W=G("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),w=r.forwardRef(({className:s,variant:a,...t},i)=>e.jsx("div",{ref:i,role:"alert",className:g(W({variant:a}),s),...t}));w.displayName="Alert";const O=r.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:g("mb-1 font-medium leading-none tracking-tight",s),...a}));O.displayName="AlertTitle";const A=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:g("text-sm [&_p]:leading-relaxed",s),...a}));A.displayName="AlertDescription";function X(){I(),N();const s=U();return r.useState(!1),r.useState(null),r.useState("normal"),E({title:"Admin Dev",description:"Developer tools and role testing.",canonicalPath:"/admin/dev"}),e.jsx(M,{children:e.jsxs("main",{className:`container mx-auto ${s?"p-4":"p-6"} space-y-6 overflow-x-hidden bg-background min-h-[calc(100vh-80px)]`,role:"main",children:[e.jsx("h1",{className:"sr-only",children:"Admin Dev"}),e.jsx(k,{}),e.jsxs("section",{"aria-label":"Role Testing",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Role Testing"}),e.jsxs(w,{children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx(A,{children:"Test how the app behaves for different user roles. Admin dashboard access remains available regardless of test role."})]}),e.jsx(B,{})]}),e.jsxs("section",{"aria-label":"Premium Access Audit",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Premium Access Audit"}),e.jsx(L,{})]}),e.jsxs("section",{"aria-label":"Animation Settings",className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Animation Settings"}),e.jsx(H,{})]})]})})}export{X as default};
//# sourceMappingURL=Dev-Bu1-D2UL.js.map
