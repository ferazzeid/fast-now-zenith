import{j as e}from"./ui-4JzjGctU.js";import{r as i}from"./vendor-D63tyEUO.js";import{o as k,u as P,s as u,C as m,a as g,b as x,c as f,d as _,e as v,F,S as I,f as c,I as l,T as D,ag as j}from"./index-D6Zlv4TB.js";import{S as E}from"./smartphone-Cfc1d1T-.js";import"./supabase-DmvLFwnu.js";/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]],M=k("apple",L),q=()=>{const[y,p]=i.useState([]),[C,S]=i.useState(!0),[r,h]=i.useState(null),{toast:o}=P();i.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:a,error:s}=await u.from("payment_provider_configs").select("*").order("provider");if(s)throw s;p(a||[])}catch(a){console.error("Error fetching providers:",a),o({title:"Error",description:"Failed to fetch payment provider settings",variant:"destructive"})}finally{S(!1)}},n=async(a,s)=>{try{h(a);const{error:t}=await u.from("payment_provider_configs").update(s).eq("provider",a);if(t)throw t;p(A=>A.map(d=>d.provider===a?{...d,...s}:d)),o({title:"Success",description:"Payment provider settings updated"})}catch(t){console.error("Error updating provider:",t),o({title:"Error",description:"Failed to update payment provider settings",variant:"destructive"})}finally{h(null)}},w=a=>{switch(a){case"stripe":return e.jsx(j,{className:"w-5 h-5"});case"google_play":return e.jsx(E,{className:"w-5 h-5"});case"apple_app_store":return e.jsx(M,{className:"w-5 h-5"});default:return e.jsx(j,{className:"w-5 h-5"})}},b=a=>{switch(a){case"stripe":return"Stripe";case"google_play":return"Google Play Billing";case"apple_app_store":return"Apple App Store";default:return a}};return C?e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsx(x,{children:"Payment Provider Settings"}),e.jsx(f,{children:"Configure payment providers for different platforms"})]}),e.jsx(_,{children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(v,{className:"w-6 h-6 animate-spin"})})})]}):e.jsx("div",{className:"space-y-6",children:y.map(a=>e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w(a.provider),e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:b(a.provider)}),e.jsxs(f,{children:[a.provider==="stripe"&&"Web payments via Stripe",a.provider==="google_play"&&"Android in-app purchases",a.provider==="apple_app_store"&&"iOS in-app purchases"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:a.is_active?"outline":"secondary",children:a.is_active?"Active":"Inactive"}),e.jsx(I,{checked:a.is_active,onCheckedChange:s=>n(a.provider,{is_active:s}),disabled:r===a.provider})]})]})}),e.jsxs(_,{className:"space-y-4",children:[a.provider==="stripe"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(c,{children:"Stripe Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Stripe settings are configured via the main admin panel and Supabase secrets."})]})}),a.provider==="google_play"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"package_name",children:"Package Name"}),e.jsx(l,{id:"package_name",value:a.config_data.package_name||"",onChange:s=>{const t={...a.config_data,package_name:s.target.value};n(a.provider,{config_data:t})},placeholder:"com.yourapp.package",disabled:r===a.provider})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"service_account_key",children:"Service Account Key (JSON)"}),e.jsx(D,{id:"service_account_key",value:a.config_data.service_account_key||"",onChange:s=>{const t={...a.config_data,service_account_key:s.target.value};n(a.provider,{config_data:t})},placeholder:"Paste your Google Cloud Service Account JSON key here",rows:6,disabled:r===a.provider}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Download from Google Cloud Console → IAM & Admin → Service Accounts"})]})]}),a.provider==="apple_app_store"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"bundle_id",children:"Bundle ID"}),e.jsx(l,{id:"bundle_id",value:a.config_data.bundle_id||"",onChange:s=>{const t={...a.config_data,bundle_id:s.target.value};n(a.provider,{config_data:t})},placeholder:"com.yourapp.bundle",disabled:r===a.provider})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"shared_secret",children:"App Store Connect Shared Secret"}),e.jsx(l,{id:"shared_secret",type:"password",value:a.config_data.shared_secret||"",onChange:s=>{const t={...a.config_data,shared_secret:s.target.value};n(a.provider,{config_data:t})},placeholder:"Your App Store Connect shared secret",disabled:r===a.provider}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Found in App Store Connect → My Apps → App → Features → In-App Purchases"})]})]}),r===a.provider&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(v,{className:"w-4 h-4 animate-spin"}),"Saving changes..."]})]})]},a.provider))})};export{q as PaymentProviderSettings};
//# sourceMappingURL=PaymentProviderSettings-De8V_gcB.js.map
