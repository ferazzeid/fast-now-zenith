import{j as e}from"./ui-4JzjGctU.js";import{r}from"./vendor-D63tyEUO.js";import{u as p,s as n,C as o,a as c,b as d,d as m,ad as f,ae as j,f as y,af as v,ag as q,a0 as L,ah as C,I as _,B as N}from"./index-CNtalSg2.js";import"./supabase-CG8ZnHQM.js";const S=()=>{const[i,t]=r.useState(""),[u,h]=r.useState(!0),{toast:a}=p();r.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:s,error:l}=await n.from("shared_settings").select("setting_value").eq("setting_key","monthly_request_limit").maybeSingle();if(l){console.error("Error loading request limits:",l),t("1000");return}t(s?.setting_value||"1000")}catch(s){console.error("Error loading request limits:",s),t("1000")}finally{h(!1)}},g=async()=>{try{const{error:s}=await n.from("shared_settings").upsert({setting_key:"monthly_request_limit",setting_value:i},{onConflict:"setting_key"});if(s)throw console.error("Error saving request limit:",s),s;a({title:"Success",description:"Monthly request limit saved successfully"})}catch(s){console.error("Error saving request limits:",s),a({title:"Error",description:`Failed to save request limits: ${s.message}`,variant:"destructive"})}};return u?e.jsxs(o,{children:[e.jsx(c,{children:e.jsx(d,{className:"text-lg",children:"User Request Limits"})}),e.jsx(m,{className:"flex items-center justify-center py-8",children:e.jsx(f,{text:"Loading usage data"})})]}):e.jsxs(o,{children:[e.jsx(c,{children:e.jsx(d,{className:"text-base",children:"AI Request Limits"})}),e.jsx(m,{children:e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{htmlFor:"paidUserLimit",className:"text-xs",children:"Monthly Limit"}),e.jsxs(v,{children:[e.jsx(q,{asChild:!0,children:e.jsx(L,{className:"w-3 h-3 text-muted-foreground"})}),e.jsx(C,{children:"Monthly AI requests for paid users (free users get 0 requests)"})]})]}),e.jsx(_,{id:"paidUserLimit",type:"number",value:i,onChange:s=>t(s.target.value),placeholder:"1000",className:"h-8 w-24 text-sm","aria-label":"Monthly AI requests for paid users"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(N,{onClick:g,size:"sm",className:"h-9 px-4",children:"Save"})})]})})})]})};export{S as UserRequestLimits};
