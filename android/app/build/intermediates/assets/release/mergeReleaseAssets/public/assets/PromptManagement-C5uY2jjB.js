import{j as t}from"./ui-4JzjGctU.js";import{r as i}from"./vendor-D63tyEUO.js";import{o as L,u as z,am as D,s as S,C as j,d as P,a as V,b as B,c as W,f as h,w as $,a2 as G,a3 as H,a4 as U,a5 as O,a6 as Y,T as K,z as J,B as y}from"./index-CNtalSg2.js";import"./supabase-CG8ZnHQM.js";/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],X=L("test-tube",Q),N=[{key:"minimalist_bw",name:"Minimalist B&W",description:"Clean black and white geometric design",prompt:"Minimalist vector poster in pure black and white only (no other colors). Single bold silhouette or icon as visual metaphor: {concept}. Flat shapes, clean geometry, strong contrast, ample negative space. Centered composition, no people or faces, no text/letters/logos/watermarks/UI. No gradients, no textures, no 3D, no photorealism, no backgrounds/scenes/props/patterns. 1:1 square, crisp, editorial poster quality."},{key:"vibrant_color",name:"Vibrant Color",description:"Clean 2-3 color design with powerful visual impact",prompt:"Minimalist poster design of {concept}. Use exactly 2-3 colors maximum: deep red, black, and white only. Clean geometric shapes, bold silhouette, strong contrast. Centered composition, no text, no fonts, no letters, no words, no numbers, no UI elements, no people, no faces. Simple, modern, classic aesthetic. Professional poster quality, 1:1 square format."},{key:"photorealistic",name:"Photorealistic",description:"Natural photography style with realistic lighting",prompt:"Professional photography of {concept}. Realistic, natural lighting with soft shadows and depth. High-quality DSLR camera shot, crisp focus, natural colors and textures. Clean composition with subtle background blur. Documentary or editorial photography style, authentic and inspiring mood. No people or faces, no artificial effects, no text/logos. Square format, professional quality."},{key:"artistic_painterly",name:"Artistic/Painterly",description:"Watercolor, oil painting, or artistic illustration",prompt:"Artistic illustration of {concept} in watercolor or oil painting style. Soft brushstrokes, artistic texture, flowing colors that blend naturally. Inspiring and uplifting mood with warm or cool color palette. Hand-painted aesthetic, organic shapes, artistic interpretation rather than literal representation. No people or faces, no text/logos. Square canvas format, fine art quality."}],n=[{key:"ai_food_response_template",title:"Food Entry Response Format",description:"Controls how the AI formats responses when presenting food entry details to users.",defaultPrompt:`I've prepared a food entry for you:

**Food:** {food_name}
**Portion:** {serving_size}g
**Calories:** {calories} cal
**Carbs:** {carbs}g

This looks good for your nutrition tracking! Would you like me to add this to your food log?`,variables:["{food_name}","{serving_size}","{calories}","{carbs}"]},{key:"ai_food_estimation_prompt",title:"Nutrition Estimation Guidelines",description:"Guidelines for the AI when estimating nutritional values for foods.",defaultPrompt:"When estimating nutrition values, use these guidelines: Provide realistic estimates based on common food databases. For proteins like chicken/fish, estimate ~165-200 calories and 0-2g carbs per 100g. For fruits, estimate 40-80 calories and 10-20g carbs per 100g. For vegetables, estimate 20-50 calories and 3-10g carbs per 100g. Always ask for clarification if the food description is vague.",variables:[]}],ae=()=>{const[d,c]=i.useState({}),[m,g]=i.useState({}),[C,T]=i.useState(!0),[f,x]=i.useState(null),[v,k]=i.useState(null),{toast:l}=z(),{colorSettings:_}=D();i.useEffect(()=>{E()},[]);const E=async()=>{try{const e=n.map(r=>r.key),s=n.filter(r=>r.hasStylePresets).map(r=>`${r.key}_preset`),o=[...e,...s],{data:a,error:p}=await S.from("shared_settings").select("setting_key, setting_value").in("setting_key",o);if(p){console.error("Error loading prompts:",p);return}const w={},b={};n.forEach(r=>{const M=a?.find(u=>u.setting_key===r.key);if(w[r.key]=M?.setting_value||r.defaultPrompt,r.hasStylePresets){const u=a?.find(R=>R.setting_key===`${r.key}_preset`);b[r.key]=u?.setting_value||"minimalist_bw"}}),c(w),g(b)}catch(e){console.error("Error loading prompts:",e),l({title:"Error",description:"Failed to load AI prompts",variant:"destructive"})}finally{T(!1)}},I=async e=>{x(e);try{const s=[{setting_key:e,setting_value:d[e]}];n.find(p=>p.key===e)?.hasStylePresets&&m[e]&&s.push({setting_key:`${e}_preset`,setting_value:m[e]});const{error:a}=await S.from("shared_settings").upsert(s,{onConflict:"setting_key"});if(a)throw a;l({title:"Success",description:"AI prompt saved successfully"})}catch(s){console.error("Error saving prompt:",s),l({title:"Error",description:"Failed to save AI prompt",variant:"destructive"})}finally{x(null)}},F=(e,s)=>{const o=N.find(a=>a.key===s);o&&(c(a=>({...a,[e]:o.prompt})),g(a=>({...a,[e]:s})))},A=async e=>{k(e.key);try{let s=d[e.key]||e.defaultPrompt;const o={"{title}":"Sample Motivator Title","{content}":"This is sample motivational content for testing.","{concept}":"mountain","{food_name}":"grilled chicken breast","{goal_title}":"Lose 10 pounds","{goal_description}":"Achieve a healthier weight through consistent exercise and nutrition","{primary_color}":_.primary_color||"220 35% 45%","{accent_color}":_.accent_color||"142 71% 45%"};e.variables.forEach(a=>{o[a]&&(s=s.replace(new RegExp(a.replace(/[{}]/g,"\\$&"),"g"),o[a]))}),await navigator.clipboard.writeText(s),l({title:"Test Prompt Copied",description:"The processed prompt has been copied to your clipboard. You can paste it into any AI image generator to test how it looks."})}catch{l({title:"Error",description:"Failed to process test prompt",variant:"destructive"})}finally{k(null)}},q=e=>{const s=n.find(o=>o.key===e);s&&c(o=>({...o,[e]:s.defaultPrompt}))};return C?t.jsx(j,{children:t.jsx(P,{children:"Loading..."})}):t.jsx("div",{className:"space-y-6",children:n.map(e=>t.jsxs(j,{children:[t.jsx(V,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(B,{className:"text-lg",children:e.title}),t.jsx(W,{className:"text-sm text-muted-foreground",children:e.description})]})}),t.jsxs(P,{className:"space-y-4",children:[e.hasStylePresets&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(h,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx($,{className:"w-4 h-4"}),"Style Preset"]}),t.jsxs(G,{value:m[e.key]||"minimalist_bw",onValueChange:s=>F(e.key,s),children:[t.jsx(H,{children:t.jsx(U,{placeholder:"Select a style preset"})}),t.jsx(O,{children:N.map(s=>t.jsx(Y,{value:s.key,children:t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("span",{className:"font-medium",children:s.name}),t.jsx("span",{className:"text-xs text-muted-foreground",children:s.description})]})},s.key))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{htmlFor:e.key,className:"text-sm font-medium",children:"Prompt Template"}),t.jsx(K,{id:e.key,value:d[e.key]||"",onChange:s=>c(o=>({...o,[e.key]:s.target.value})),placeholder:e.defaultPrompt,className:"min-h-[120px] font-mono text-sm"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{className:"text-sm font-medium",children:"Available Variables"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.variables.map(s=>t.jsx(J,{variant:"outline",className:"font-mono text-xs rounded-sm",children:s},s))})]}),t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[t.jsx(y,{size:"sm",onClick:()=>I(e.key),disabled:f===e.key,className:"w-full sm:w-auto",children:f===e.key?"Saving...":"Save"}),t.jsxs(y,{variant:"outline",size:"sm",onClick:()=>A(e),disabled:v===e.key,className:"w-full sm:w-auto flex items-center gap-1",children:[t.jsx(X,{className:"w-4 h-4"}),v===e.key?"Testing...":"Test"]}),t.jsx(y,{variant:"outline",size:"sm",onClick:()=>q(e.key),className:"w-full sm:w-auto",children:"Reset to Default"})]})]})]},e.key))})};export{ae as PromptManagement};
