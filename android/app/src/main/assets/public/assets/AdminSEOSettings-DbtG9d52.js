import{j as e}from"./ui-4JzjGctU.js";import{r as c}from"./vendor-D63tyEUO.js";import{u as O,s as r,C as x,a as m,b as p,ai as f,d as u,c as C,f as _,S as j}from"./index-CNtalSg2.js";import{G as S}from"./globe-BkLxb4-L.js";import"./supabase-CG8ZnHQM.js";const T=()=>{const[l,o]=c.useState({indexHomepage:!1,indexOtherPages:!1}),[w,y]=c.useState(!0),{toast:d}=O();c.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:s,error:t}=await r.from("shared_settings").select("setting_key, setting_value").in("setting_key",["seo_index_homepage","seo_index_other_pages"]);if(t)throw t;if(s){const i=s.reduce((n,a)=>(n[a.setting_key]=a.setting_value==="true",n),{});o({indexHomepage:i.seo_index_homepage||!1,indexOtherPages:i.seo_index_other_pages||!1})}}catch(s){console.error("Failed to fetch SEO settings:",s),d({title:"Error",description:"Failed to load SEO settings",variant:"destructive"})}finally{y(!1)}},h=async(s,t)=>{try{const{data:i,error:n}=await r.from("shared_settings").select("id").eq("setting_key",s).maybeSingle();if(n&&n.code!=="PGRST116")throw n;let a;if(i){const{error:g}=await r.from("shared_settings").update({setting_value:t.toString()}).eq("setting_key",s);a=g}else{const{error:g}=await r.from("shared_settings").insert({setting_key:s,setting_value:t.toString()});a=g}if(a)throw a;d({title:"Settings Updated",description:"SEO indexing settings have been saved"})}catch(i){console.error("Failed to update SEO setting:",i),d({title:"Error",description:"Failed to update SEO settings",variant:"destructive"})}},v=async s=>{o(t=>({...t,indexHomepage:s})),await h("seo_index_homepage",s)},N=async s=>{o(t=>({...t,indexOtherPages:s})),await h("seo_index_other_pages",s)};return w?e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"SEO Indexing Settings"]})}),e.jsx(u,{children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-muted rounded"})]})})]}):e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsxs(p,{className:"text-base font-medium flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"SEO Indexing Settings"]}),e.jsx(C,{children:"Control search engine indexing for different pages"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(_,{htmlFor:"homepage-indexing",className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"})," Homepage Indexing"]}),e.jsx(j,{id:"homepage-indexing",checked:l.indexHomepage,onCheckedChange:v})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(_,{htmlFor:"other-pages-indexing",className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"})," Other Pages Indexing"]}),e.jsx(j,{id:"other-pages-indexing",checked:l.indexOtherPages,onCheckedChange:N})]})]})]})};export{T as AdminSEOSettings};
