import{j as e}from"./ui-4JzjGctU.js";import{r as c}from"./vendor-D63tyEUO.js";import{s as v,C as l,L as j,a as p,b as h,d as g}from"./index-D6Zlv4TB.js";import"./supabase-DmvLFwnu.js";const w=()=>{const[o,m]=c.useState([]),[x,n]=c.useState(!0);c.useEffect(()=>{u()},[]);const u=async()=>{try{n(!0);const{data:s,error:d}=await v.from("profiles").select(`
          user_tier,
          last_activity_at
        `);if(d)throw d;const a=new Date;a.setDate(a.getDate()-7);const t={paid_user:{total:0,active:0,inactive:0},free_user:{total:0,active:0,inactive:0}};s?.forEach(i=>{const r=i.user_tier||"free_user";t[r]&&(t[r].total++,i.last_activity_at&&new Date(i.last_activity_at)>a?t[r].active++:t[r].inactive++)});const f=[{tier:"Paid Users (Trial + Subscribed)",total:t.paid_user.total,active:t.paid_user.active,inactive:t.paid_user.inactive},{tier:"Free Users (Trial Ended)",total:t.free_user.total,active:t.free_user.active,inactive:t.free_user.inactive}];m(f)}catch(s){console.error("Error fetching tier stats:",s)}finally{n(!1)}};return x?e.jsx(l,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(j,{})})}):e.jsxs(l,{children:[e.jsx(p,{children:e.jsx(h,{className:"text-lg",children:"User Tiers Overview"})}),e.jsx(g,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3 text-center",children:s.tier}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Active Users"}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:s.active})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Inactive Users"}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:s.inactive})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted/50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Total"}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:s.total})]})]})]},s.tier))})})]})};export{w as AdminTierStats};
//# sourceMappingURL=AdminTierStats-C0LYPzUY.js.map
